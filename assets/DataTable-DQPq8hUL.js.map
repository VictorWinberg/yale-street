{"version":3,"file":"DataTable-DQPq8hUL.js","sources":["../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/Add.js","../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/Delete.js","../../src/ui-component/DataTable.tsx"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","import { useState } from 'react';\n\n// material-ui\nimport { Box, IconButton, Tooltip } from '@mui/material';\nimport {\n  MRT_RowData,\n  MRT_TableInstance,\n  MaterialReactTable,\n  type MRT_Row,\n  type MRT_TableOptions\n} from 'material-react-table';\nimport { bindTrigger } from 'material-ui-popup-state';\n\n// project imports\nimport { DataTableProps, useDataTable } from '@/hooks/useDataTable';\nimport { FilterParam, StringParam, useQueryParam } from '@/hooks/useQueryParam';\nimport DeleteConfirm from './DeleteConfirm';\nimport { sxFlex } from './extended/FlexGrow';\n\n// assets\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\n\ninterface CustomProps<T extends Record<string, unknown>> {\n  editDisplayMode: MRT_TableOptions<T>['editDisplayMode'];\n  setEditDisplayMode: (mode: MRT_TableOptions<T>['editDisplayMode']) => void;\n}\n\nconst DataTable = <T extends Record<string, unknown>>({\n  editDisplayMode: _editDisplayMode = 'row',\n  state,\n  ...props\n}: DataTableProps<T>) => {\n  const [columnFilters, setColumnFilters] = useQueryParam('filters', FilterParam, []);\n  const [globalFilter, setGlobalFilter] = useQueryParam('search', StringParam, '');\n  const [editDisplayMode, setEditDisplayMode] = useState<MRT_TableOptions<T>['editDisplayMode']>(_editDisplayMode);\n  const custom: CustomProps<T> = { editDisplayMode, setEditDisplayMode };\n\n  const table = useDataTable<T>({\n    editDisplayMode,\n    initialState: { showGlobalFilter: !!globalFilter },\n    state: { columnFilters, globalFilter, ...state },\n    onColumnFiltersChange: setColumnFilters,\n    onGlobalFilterChange: setGlobalFilter,\n    onCreatingRowSave: async ({ row, values, table }) => {\n      await props.onCreate?.({ ...row.original, ...values } as T);\n      table.setCreatingRow(null);\n      setEditDisplayMode(_editDisplayMode);\n    },\n    onEditingRowSave: async ({ row, values, table }) => {\n      await props.onUpdate?.({ ...row.original, ...values } as T);\n      table.setEditingRow(null);\n      setEditDisplayMode(_editDisplayMode);\n    },\n    displayColumnDefOptions: {\n      'mrt-row-actions': { minSize: 120, size: 120, maxSize: 120, grow: false }\n    },\n    muiTablePaperProps: { sx: { ...sxFlex, mx: -1, boxShadow: 0 } },\n    muiTableContainerProps: { sx: { ...sxFlex, height: '300px' } },\n    positionActionsColumn: 'last',\n    renderRowActions: RowActions<T>(props, custom),\n    renderTopToolbarCustomActions: CustomActions<T>(),\n    muiTableBodyCellProps: ({ row, column, table }) => ({\n      onDoubleClick: () => {\n        setEditDisplayMode('row');\n        table.setEditingRow(table.getState().editingRow === row ? null : row);\n\n        queueMicrotask(() => {\n          const field = table.refs.editInputRefs.current[column.id];\n          field?.focus();\n        });\n      },\n      onKeyDown: (event) => {\n        if (event.key === 'Escape') {\n          table.setEditingRow(null);\n        }\n\n        if (event.key === 'Enter') {\n          table.options.onEditingRowSave?.({\n            exitEditingMode: () => table.setEditingRow(null),\n            row,\n            table,\n            values: row?._valuesCache\n          });\n        }\n      }\n    }),\n    ...props\n  });\n\n  return <MaterialReactTable table={table} />;\n};\n\nconst RowActions = <T extends MRT_RowData>(props: DataTableProps<T>, custom: CustomProps<T>) => {\n  return ({ row, table }: { row: MRT_Row<T>; table: MRT_TableInstance<T> }) => (\n    <Box sx={{ display: 'flex', gap: '1rem' }}>\n      <Tooltip title=\"Edit\">\n        <IconButton onClick={() => [table.setEditingRow(row), custom.setEditDisplayMode('modal')]}>\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n      <DeleteConfirm\n        id={row.id}\n        onClick={() => {\n          props.onDelete?.(row.original);\n          table.setEditingRow(null);\n        }}\n      >\n        {(popupState) => (\n          <Tooltip title=\"Delete\">\n            <IconButton color=\"error\" {...bindTrigger(popupState)}>\n              <DeleteIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n      </DeleteConfirm>\n    </Box>\n  );\n};\n\nconst CustomActions = <T extends MRT_RowData>() => {\n  return ({ table }: { table: MRT_TableInstance<T> }) => (\n    <IconButton\n      onClick={() => {\n        table.setCreatingRow(true); //simplest way to open the create row modal with no default values\n\n        //or you can pass in a row object to set default values with the `createRow` helper function\n        // table.setCreatingRow(\n        //   createRow(table, {\n        //     //optionally pass in default values for the new row, useful for nested data or other complex scenarios\n        //   }),\n        // );\n      }}\n    >\n      <AddIcon />\n    </IconButton>\n  );\n};\n\nexport default DataTable;\n"],"names":["_interopRequireDefault","require$$0","Add","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","Delete","DataTable","_editDisplayMode","state","props","columnFilters","setColumnFilters","useQueryParam","FilterParam","globalFilter","setGlobalFilter","StringParam","editDisplayMode","setEditDisplayMode","useState","custom","table","useDataTable","row","values","_a","sxFlex","RowActions","CustomActions","column","field","event","jsx","MaterialReactTable","jsxs","Box","Tooltip","IconButton","EditIcon","DeleteConfirm","popupState","bindTrigger","DeleteIcon","AddIcon"],"mappings":"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","x_google_ignoreList":[0,1]}