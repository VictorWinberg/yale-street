{"version":3,"file":"useCompaniesMutations-Ciu6v55t.js","sources":["../../src/features/companies/components/CompanyForm.tsx","../../src/features/companies/hooks/useCompaniesMutations.ts"],"sourcesContent":["// material-ui\nimport { Grid, TextField } from '@mui/material';\n\n// third party\nimport { useForm } from 'react-hook-form';\n\n// project imports\nimport SebraForm, { FormProps } from '@/ui-component/SebraForm';\nimport { Company } from '@/api/gql/graphql';\n\n// ==============================|| COMPANY FORM ||============================== //\n\nconst CompanyForm = ({ formProps, ...props }: FormProps<Company>) => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors }\n  } = useForm<Company>(formProps);\n\n  return (\n    <SebraForm {...props} handleSubmit={handleSubmit}>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <TextField\n            fullWidth\n            label=\"Bolagsnamn\"\n            type=\"text\"\n            margin=\"none\"\n            {...register('companyName', { required: true })}\n            error={!!errors.companyName}\n          />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Address\" type=\"text\" margin=\"none\" {...register('address')} />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Industri\" type=\"text\" margin=\"none\" {...register('industry')} />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Website\" type=\"text\" margin=\"none\" {...register('website')} />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Telefon\" type=\"text\" margin=\"none\" {...register('phone')} />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Email\" type=\"text\" margin=\"none\" {...register('email')} />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <TextField fullWidth label=\"Org.nr\" type=\"text\" margin=\"none\" {...register('organizationNumber')} />\n        </Grid>\n      </Grid>\n    </SebraForm>\n  );\n};\n\nexport default CompanyForm;\n","import { useMutation, useQueryClient } from '@tanstack/react-query';\n\nimport { useSnackbar } from '@/hooks/useSnackbar';\nimport { useAppStore } from '@/store';\nimport { createCompanyGQL, deleteCompanyGQL, updateCompanyGQL } from '../api/companiesGQL';\nimport { createCompanyLocal, deleteCompanyLocal, updateCompanyLocal } from '../api/companiesLocal';\n\nexport const useCreateCompany = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? createCompanyLocal : createCompanyGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['companies'] });\n      showSnackbar('Bolag skapat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när bolaget skulle skapas.', 'error');\n    }\n  });\n};\n\nexport const useUpdateCompany = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? updateCompanyLocal : updateCompanyGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['companies'] });\n      showSnackbar('Bolag uppdaterat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när bolaget skulle uppdateras.', 'error');\n    }\n  });\n};\n\nexport const useDeleteCompany = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? deleteCompanyLocal : deleteCompanyGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['companies'] });\n      showSnackbar('Bolag borttaget!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när bolaget skulle tas bort.', 'error');\n    }\n  });\n};\n"],"names":["CompanyForm","formProps","props","register","handleSubmit","errors","useForm","jsx","SebraForm","Grid","TextField","useCreateCompany","isDemo","useAppStore","queryClient","useQueryClient","showSnackbar","useSnackbar","useMutation","createCompanyLocal","createCompanyGQL","useUpdateCompany","updateCompanyLocal","updateCompanyGQL","useDeleteCompany","deleteCompanyLocal","deleteCompanyGQL"],"mappings":"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"}