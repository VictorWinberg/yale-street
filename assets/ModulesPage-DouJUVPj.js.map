{"version":3,"file":"ModulesPage-DouJUVPj.js","sources":["../../src/features/modules/components/ModuleBookmark.tsx","../../src/features/modules/pages/ModulesPage.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { BASE_URL } from '@/config';\n\ninterface ModuleBookmarkProps {\n  label: string;\n  height: number;\n  disabled: boolean;\n}\n\nconst moduleBookmark = (url: string, { label, height, disabled }: ModuleBookmarkProps) => `\n<a\n  style=\"${disabled ? 'color: gray; cursor: default;' : 'color: #5969cf;'}\"\n  tabindex=\"${disabled ? '-1' : '0'}\"\n  tabindex=\"0\"\n  ${disabled ? \"href='#'\" : ''}\n  href='\n    javascript:(function () {\n      var messageBox = document.createElement(\"div\");\n      messageBox.innerHTML = \"Klicka var som helst för att klistra in på webbplatsen.<br/><em>Obs: Fungerar inte på alla webbplatser.</em>\";\n      messageBox.style.position = \"fixed\";\n      messageBox.style.top = \"10px\";\n      messageBox.style.right = \"10px\";\n      messageBox.style.color = \"#5969cf\";\n      messageBox.style.border = \"2px dashed #5969cf\";\n      messageBox.style.backgroundColor = \"#fff\";\n      messageBox.style.padding = \"10px\";\n      messageBox.style.zIndex = \"10000\";\n      document.body.appendChild(messageBox);\n\n      function handleClick(event) {\n        var iframe = document.createElement(\"iframe\");\n        iframe.src = \"${url}\";\n        iframe.scrolling = \"no\";\n        iframe.style.width = \"100%\";\n        iframe.style.height = \"${height}px\";\n        iframe.style.border = \"none\";\n        iframe.style.outline = \"none\";\n        iframe.style.margin = \"0\";\n        iframe.style.padding = \"0\";\n        iframe.style.overflow = \"hidden\";\n        var targetElement = event.target;\n        targetElement.parentNode.insertBefore(iframe, targetElement);\n        document.body.removeChild(messageBox);\n        document.removeEventListener(\"click\", handleClick);\n      }\n      document.addEventListener(\"click\", handleClick);\n    })();\n  '\n  aria-label=\"${label}\"\n  aria-disabled=\"${disabled}\"\n>\n  <svg\n    style=\"fill: currentColor; font-size: 1.5rem; width: 1em; height: 1em;\"\n    focusable=\"false\"\n    aria-hidden=\"true\"\n    viewBox=\"0 0 24 24\"\n  >\n    <path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2\"></path>\n  </svg>\n  <span style=\"display: none\">Infoga - ${label}</span>\n</a>\n`;\n\nconst ModuleBookmark = (props: ModuleBookmarkProps) => {\n  const [url, setUrl] = useState('');\n\n  useEffect(() => {\n    setTimeout(() => setUrl(`${location.origin}${BASE_URL}module${location.search}`), 0);\n  }, [props]);\n\n  return <div dangerouslySetInnerHTML={{ __html: moduleBookmark(url, props) }} />;\n};\n\nexport default ModuleBookmark;\n","import { useState } from 'react';\n\n// material-ui\nimport {\n  Box,\n  Divider,\n  FormControl,\n  Grid,\n  InputAdornment,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  Tooltip\n} from '@mui/material';\nimport { SelectChangeEvent } from '@mui/material/Select/SelectInput';\n\n// project imports\nimport Module from '../components/Module';\nimport Bookmark from '../components/ModuleBookmark';\nimport { AnyData, ModuleConfigItem, modules } from '../config/ModuleConfig';\n\nconst ModulesPage = () => {\n  const [selectedModule, setSelectedModule] = useState<ModuleConfigItem<AnyData> | undefined>(() => {\n    const searchParams = new URLSearchParams(window.location.search);\n    const module = modules.find((module) => module.key === searchParams.get('module'));\n    if (module) module.props = { ...module.props, ...module.configProps };\n    return module;\n  });\n  const [title, setTitle] = useState<string | undefined>(selectedModule?.label);\n  const [height, setHeight] = useState<number>(500);\n\n  const handleModuleChange = (event: SelectChangeEvent<string>) => {\n    const module = modules.find((module) => module.key === event.target.value);\n    if (module) module.props = { ...module.props, ...module.configProps }; // Merge props with configProps\n    window.history.replaceState(null, '', window.location.pathname); // Remove all query params\n    setSelectedModule(module);\n    setTitle(module?.title);\n  };\n\n  return (\n    <Box>\n      <Grid container spacing={2}>\n        <Grid item xs>\n          <FormControl variant=\"outlined\" fullWidth sx={{ my: 2 }}>\n            <InputLabel>Välj modul</InputLabel>\n            <Select value={selectedModule?.key ?? ''} onChange={handleModuleChange} label=\"Välj modul\">\n              <MenuItem value=\"\">\n                <em>Välj modul</em>\n              </MenuItem>\n              {modules.map((module) => (\n                <MenuItem key={module.key} value={module.key}>\n                  {module.label}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Grid item sx={{ alignContent: 'center', textAlign: 'center' }}>\n          <Tooltip title=\"Dra bokmärket till bokmärkesfältet\" arrow>\n            <Box sx={{ width: 24, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n              <Bookmark label={selectedModule?.title ?? ''} height={height} disabled={!selectedModule} />\n            </Box>\n          </Tooltip>\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={2}>\n        <Grid item xs={8}>\n          <TextField\n            fullWidth\n            label=\"Titel\"\n            value={title ?? ''}\n            onChange={(e) => setTitle(e.target.value)}\n            variant=\"outlined\"\n          />\n        </Grid>\n        <Grid item xs={4}>\n          <TextField\n            fullWidth\n            label=\"Höjd\"\n            type=\"number\"\n            value={height}\n            onChange={(e) => setHeight(parseInt(e.target.value))}\n            variant=\"outlined\"\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">px</InputAdornment>\n            }}\n          />\n        </Grid>\n      </Grid>\n\n      <Divider sx={{ my: 2 }} />\n\n      <Box sx={{ height, border: '2px dashed', borderColor: 'primary.main', overflow: 'hidden' }}>\n        <Module title={title ?? null} selectedModule={selectedModule ?? null} />\n      </Box>\n    </Box>\n  );\n};\n\nexport default ModulesPage;\n"],"names":["moduleBookmark","url","label","height","disabled","ModuleBookmark","props","setUrl","useState","useEffect","BASE_URL","jsx","ModulesPage","selectedModule","setSelectedModule","searchParams","module","modules","title","setTitle","setHeight","handleModuleChange","event","Box","jsxs","Grid","FormControl","InputLabel","Select","MenuItem","Tooltip","Bookmark","TextField","e","InputAdornment","Divider","Module"],"mappings":"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"}