import{r as v,j as t,G as i,I as u,C as k,z as g,A as x,E as b,H as f}from"./index-BVUbJ7Lz.js";import{u as E,C as d}from"./index.esm-DxZzVQH1.js";import{u as I}from"./useCompaniesQueries-DoXPqknq.js";import{u as w}from"./useContactsQueries-BOXpJhoa.js";import{S as L,A as m}from"./SebraForm-DP6K8exJ.js";import{u as q,c as D,b as O,d as _,e as F,f as K,g as N}from"./useAssignmentsQueries-DKOJgyLE.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new s.Error().stack;o&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[o]="31d4ede9-3e84-4812-8a95-30db7e105c80",s._sentryDebugIdIdentifier="sentry-dbid-31d4ede9-3e84-4812-8a95-30db7e105c80")}catch{}})();const z=({formProps:s,...o})=>{const{data:r=[]}=q(),{data:p=[]}=w(),{data:h=[]}=I(),{register:c,control:l,formState:{errors:y},handleSubmit:A}=E(s),j=v.useMemo(()=>[...new Set(r.map(a=>a.status))],[r]);return t.jsx(L,{...o,handleSubmit:A,children:t.jsxs(i,{container:!0,spacing:2,children:[t.jsx(i,{item:!0,xs:12,children:t.jsx(u,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...c("assignmentName",{required:!0}),error:!!y.assignmentName})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"status",control:l,render:({field:a})=>t.jsx(m,{freeSolo:!0,options:j,value:j.find(e=>e===a.value)||null,onChange:(e,n)=>a.onChange(n??""),renderInput:e=>t.jsx(u,{...e,label:"Status",variant:"outlined",fullWidth:!0})})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(u,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...c("type")})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(u,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...c("fee",{valueAsNumber:!0}),InputProps:{endAdornment:"SEK"}})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"responsibleContacts",control:l,render:({field:a})=>t.jsx(m,{multiple:!0,limitTags:2,disableCloseOnSelect:!0,id:"multiple-contacts",options:p,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,isOptionEqualToValue:(e,n)=>e.id===n.id,value:a.value||[],onChange:(e,n)=>a.onChange(n),renderInput:e=>t.jsx(u,{...e,label:"Ansvariga kontakter",variant:"outlined",fullWidth:!0,error:!!y.responsibleContacts}),renderTags:(e,n)=>e.map((C,S)=>v.createElement(k,{...n({index:S}),key:C.id,label:C.contactName}))})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"externalContact",control:l,render:({field:a})=>t.jsx(m,{options:p,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,value:p.find(e=>{var n;return e.id===((n=a.value)==null?void 0:n.id)})||null,onChange:(e,n)=>a.onChange(n??void 0),renderInput:e=>t.jsx(u,{...e,label:"Extern kontakt",variant:"outlined",fullWidth:!0})})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"company",control:l,render:({field:a})=>t.jsx(m,{options:h,getOptionKey:e=>e.id,getOptionLabel:e=>e.companyName,value:h.find(e=>{var n;return e.id===((n=a.value)==null?void 0:n.id)})||null,onChange:(e,n)=>a.onChange(n??void 0),renderInput:e=>t.jsx(u,{...e,label:"Bolag",variant:"outlined",fullWidth:!0})})})})]})})},B=()=>{const[{isDemo:s}]=g(),o=x(),{showSnackbar:r}=b();return f({mutationFn:s?D:O,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag skapat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle skapas.","error")}})},H=()=>{const[{isDemo:s}]=g(),o=x(),{showSnackbar:r}=b();return f({mutationFn:s?_:F,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag uppdaterat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},P=()=>{const[{isDemo:s}]=g(),o=x(),{showSnackbar:r}=b();return f({mutationFn:s?K:N,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag borttaget!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{z as A,H as a,P as b,B as u};
//# sourceMappingURL=useAssignmentsMutations-BOqk_WLL.js.map
