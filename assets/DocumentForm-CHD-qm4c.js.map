{"version":3,"file":"DocumentForm-CHD-qm4c.js","sources":["../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/esm/CloudDownload.js","../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/esm/CloudUpload.js","../../src/features/documents/api/documentsGQL.ts","../../src/features/documents/api/documentsLocal.ts","../../src/features/documents/api/documentsREST.ts","../../src/features/documents/hooks/useDocumentsMutations.ts","../../src/features/documents/hooks/useDocumentsQueries.ts","../../src/ui-component/FileSelecter.tsx","../../src/hooks/useWindowDimension.ts","../../src/ui-component/Preview.tsx","../../src/features/documents/components/DocumentForm.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z\"\n}), 'CloudDownload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z\"\n}), 'CloudUpload');","import { graphql } from '@/api/gql';\nimport {\n  CreateDocumentReferenceMutation,\n  DeleteDocumentMutation,\n  DeleteDocumentReferenceMutation,\n  DocumentReference,\n  DocumentReference_Where,\n  GetDocumentQuery,\n  GetDocumentReferencesQuery,\n  GetDocumentsQuery,\n  Media,\n  Media_Where,\n  UpdateDocumentReferenceMutation\n} from '@/api/gql/graphql';\nimport { requestGQL } from '@/hooks/useGraphQL';\nimport { pick } from '@/utils';\n\nexport const getDocumentsGQL = (where?: Media_Where): Promise<GetDocumentsQuery> =>\n  requestGQL(\n    graphql(`\n      query GetDocuments($where: Media_where) {\n        allMedia(sort: \"id\", where: $where) {\n          docs {\n            id\n            filename\n            mimeType\n            thumbnailURL\n            alt\n            url\n            createdAt\n            updatedAt\n          }\n        }\n      }\n    `)\n  )({ where });\n\nexport const getDocumentGQL = (data: Pick<Media, 'id'>): Promise<GetDocumentQuery> =>\n  requestGQL(\n    graphql(`\n      query GetDocument($id: String!) {\n        Media(id: $id) {\n          id\n          filename\n          mimeType\n          thumbnailURL\n          alt\n          url\n          createdAt\n          updatedAt\n        }\n      }\n    `)\n  )({ id: data.id });\n\nexport const deleteDocumentGQL = (data: Pick<Media, 'id'>): Promise<DeleteDocumentMutation> =>\n  requestGQL(\n    graphql(`\n      mutation DeleteDocument($id: String!) {\n        deleteMedia(id: $id) {\n          id\n        }\n      }\n    `)\n  )({ id: data.id });\n\nexport const getDocumentReferencesGQL = (where?: DocumentReference_Where): Promise<GetDocumentReferencesQuery> =>\n  requestGQL(\n    graphql(`\n      query GetDocumentReferences($where: DocumentReference_where) {\n        DocumentReferences(sort: \"id\", where: $where) {\n          docs {\n            id\n            entityId\n            entityType\n            createdAt\n            updatedAt\n\n            document {\n              id\n              alt\n              filename\n              mimeType\n              thumbnailURL\n              url\n            }\n          }\n        }\n      }\n    `)\n  )({ where });\n\nexport const createDocumentReferenceGQL = (\n  data: Omit<DocumentReference, 'id'>\n): Promise<CreateDocumentReferenceMutation> =>\n  requestGQL(\n    graphql(`\n      mutation CreateDocumentReference($data: mutationDocumentReferenceInput!) {\n        createDocumentReference(data: $data) {\n          id\n        }\n      }\n    `)\n  )({\n    data: {\n      ...pick(data, ['entityId', 'entityType']),\n      document: data.document.id\n    }\n  });\n\nexport const updateDocumentReferenceGQL = (data: DocumentReference): Promise<UpdateDocumentReferenceMutation> =>\n  requestGQL(\n    graphql(`\n      mutation UpdateDocumentReference($id: String!, $data: mutationDocumentReferenceUpdateInput!) {\n        updateDocumentReference(id: $id, data: $data) {\n          id\n        }\n      }\n    `)\n  )({\n    id: data.id,\n    data: {\n      ...pick(data, ['entityId', 'entityType']),\n      document: data.document.id\n    }\n  });\n\nexport const deleteDocumentReferenceGQL = (data: DocumentReference): Promise<DeleteDocumentReferenceMutation> =>\n  requestGQL(\n    graphql(`\n      mutation DeleteDocumentReference($id: String!) {\n        deleteDocumentReference(id: $id) {\n          id\n        }\n      }\n    `)\n  )({ id: data.id });\n","import { v4 as uuidv4 } from 'uuid';\n\nimport { deleteQuery, insertQuery, selectAllQuery } from '@/api/DummyDB';\nimport {\n  CreateDocumentReferenceMutation,\n  DeleteDocumentReferenceMutation,\n  DocumentReference,\n  DocumentReference_Where,\n  GetDocumentReferencesQuery,\n  Media,\n  UpdateDocumentReferenceMutation\n} from '@/api/gql/graphql';\nimport { AssertKeys, convertToSQLWhereClause, getAllFilesFromIndexedDB, pick, validateRequiredFields } from '@/utils';\n\ntype LocalDocumentReference = {\n  id: string;\n  document: Media;\n  entityType: string;\n  entityId: string;\n  createdAt?: string;\n  updatedAt?: string;\n};\n\nexport const verify: AssertKeys<LocalDocumentReference, Omit<DocumentReference, '__typename'>> = true;\n\ntype FlatDocumentReference = Omit<LocalDocumentReference, 'document'> & { document: string };\n\nexport const getDocumentReferencesLocal = async (\n  where?: DocumentReference_Where\n): Promise<GetDocumentReferencesQuery> => {\n  const refs = await selectAllQuery<FlatDocumentReference>('document_references', convertToSQLWhereClause(where));\n  const { allMedia } = await getAllFilesFromIndexedDB({ id: { in: refs.map((doc) => doc.document) } });\n  const docs = refs.map((ref) => ({ ...ref, document: allMedia!.docs!.find((doc) => doc!.id === ref.document)! }));\n  return { DocumentReferences: { docs } };\n};\n\nexport const createDocumentReferenceLocal = async (\n  data: Omit<DocumentReference, 'id'>\n): Promise<CreateDocumentReferenceMutation> => {\n  validateRequiredFields(data, ['document', 'entityType', 'entityId']);\n  const params = pick({ ...data, id: uuidv4(), document: data.document.id }, [\n    'id',\n    'document',\n    'entityType',\n    'entityId'\n  ]);\n  return { createDocumentReference: await insertQuery<FlatDocumentReference>('document_references', params) };\n};\n\nexport const updateDocumentReferenceLocal = async ({\n  id,\n  ...data\n}: DocumentReference): Promise<UpdateDocumentReferenceMutation> => {\n  await deleteDocumentReferenceLocal({ id });\n  const res = await createDocumentReferenceLocal(data);\n  return { updateDocumentReference: res.createDocumentReference };\n};\n\nexport const deleteDocumentReferenceLocal = async ({\n  id\n}: Pick<DocumentReference, 'id'>): Promise<DeleteDocumentReferenceMutation> => {\n  return { deleteDocumentReference: await deleteQuery<FlatDocumentReference>('document_references', { id }) };\n};\n","import { Media } from '@/api/gql/graphql';\nimport { API_URL } from '@/config';\nimport { loadToken } from '@/utils/token';\n\nexport const createDocumentRest = async (data: Media & { upload?: File }): Promise<{ doc: Media }> => {\n  const { upload, alt } = data;\n  if (!upload) throw new Error('No file provided');\n\n  const token = loadToken();\n  const formData = new FormData();\n  formData.append('file', upload);\n  formData.append('_payload', JSON.stringify({ alt }));\n\n  const response = await fetch(`${API_URL}/media`, {\n    method: 'POST',\n    body: formData,\n    headers: {\n      ...(token && { Authorization: `JWT ${token}` })\n    }\n  });\n\n  if (!response.ok) {\n    throw new Error('Failed to upload document');\n  }\n\n  return await response.json();\n};\n\nexport const updateDocumentRest = async (data: Media & { upload?: File }): Promise<{ doc: Media }> => {\n  const { upload, alt } = data;\n  const token = loadToken();\n\n  let body;\n  let headers = {};\n  if (upload) {\n    body = new FormData();\n    body.append('file', upload);\n    body.append('_payload', JSON.stringify({ alt }));\n  } else {\n    body = JSON.stringify({ alt });\n    headers = { 'Content-Type': 'application/json' };\n  }\n\n  const response = await fetch(`${API_URL}/media/?where[id][equals]=${data.id}`, {\n    method: 'PATCH',\n    body,\n    headers: {\n      ...(token && { Authorization: `JWT ${token}` }),\n      ...headers\n    }\n  });\n\n  if (!response.ok) {\n    throw new Error('Failed to update document');\n  }\n\n  return await response.json();\n};\n","import { useMutation, useQueryClient } from '@tanstack/react-query';\n\nimport { useSnackbar } from '@/hooks/useSnackbar';\nimport { useAppStore } from '@/store';\nimport { deleteFileFromIndexedDB, saveFileToIndexedDB } from '@/utils';\nimport {\n  createDocumentReferenceGQL,\n  deleteDocumentGQL,\n  deleteDocumentReferenceGQL,\n  updateDocumentReferenceGQL\n} from '../api/documentsGQL';\nimport {\n  createDocumentReferenceLocal,\n  deleteDocumentReferenceLocal,\n  updateDocumentReferenceLocal\n} from '../api/documentsLocal';\nimport { createDocumentRest, updateDocumentRest } from '../api/documentsREST';\n\nexport const useSaveDocument = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? saveFileToIndexedDB : createDocumentRest,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['documents'] });\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokumentet sparat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle sparas.', 'error');\n    }\n  });\n};\n\nexport const useUpdateDocument = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? saveFileToIndexedDB : updateDocumentRest,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['documents'] });\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokumentet uppdaterat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle uppdateras.', 'error');\n    }\n  });\n};\n\nexport const useDeleteDocument = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: ({ id }: { id: string }) =>\n      Promise.all([\n        isDemo ? deleteFileFromIndexedDB({ id }) : deleteDocumentGQL({ id })\n        // deleteDocumentReferenceLocal({ document: id })\n      ]),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['documents'] });\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokumentet borttaget!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle tas bort.', 'error');\n    }\n  });\n};\n\nexport const useCreateDocumentReference = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? createDocumentReferenceLocal : createDocumentReferenceGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokument skapat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle skapas.', 'error');\n    }\n  });\n};\n\nexport const useUpdateDocumentReference = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? updateDocumentReferenceLocal : updateDocumentReferenceGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokument uppdaterat!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle uppdateras.', 'error');\n    }\n  });\n};\n\nexport const useDeleteDocumentReference = () => {\n  const [{ isDemo }] = useAppStore();\n  const queryClient = useQueryClient();\n  const { showSnackbar } = useSnackbar();\n\n  return useMutation({\n    mutationFn: isDemo ? deleteDocumentReferenceLocal : deleteDocumentReferenceGQL,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['document_references'] });\n      showSnackbar('Dokument borttaget!');\n    },\n    onError: () => {\n      showSnackbar('Ett fel uppstod när dokumentet skulle tas bort.', 'error');\n    }\n  });\n};\n","// third party\nimport { useQuery } from '@tanstack/react-query';\n\n// project imports\nimport { DocumentReference_Where, Media_Where } from '@/api/gql/graphql';\nimport { useAppStore } from '@/store';\nimport { getAllFilesFromIndexedDB, getFileFromIndexedDB } from '@/utils/idb';\nimport { getDocumentGQL, getDocumentReferencesGQL, getDocumentsGQL } from '../api/documentsGQL';\nimport { getDocumentReferencesLocal } from '../api/documentsLocal';\n\nexport const useDocuments = (where?: Media_Where) => {\n  const [{ isDemo }] = useAppStore();\n  const fn = isDemo ? getAllFilesFromIndexedDB : getDocumentsGQL;\n\n  return useQuery({\n    queryKey: ['documents', where],\n    queryFn: () => fn(where),\n    select: (data) => data.allMedia?.docs?.filter((i) => !!i) || [],\n    enabled: where && Object.keys(where).length > 0\n  });\n};\n\nexport const useDocument = (id: string | undefined) => {\n  const [{ isDemo }] = useAppStore();\n  const fn = isDemo ? getFileFromIndexedDB : getDocumentGQL;\n\n  return useQuery({\n    queryKey: ['documents', id],\n    queryFn: id ? () => fn({ id }) : undefined,\n    select: (data) => data?.Media,\n    enabled: !!id\n  });\n};\n\nexport const useDocumentReferences = (where?: DocumentReference_Where) => {\n  const [{ isDemo }] = useAppStore();\n  const fn = isDemo ? getDocumentReferencesLocal : getDocumentReferencesGQL;\n\n  return useQuery({\n    queryKey: ['document_references', where],\n    queryFn: () => fn(where),\n    select: (data) => data.DocumentReferences?.docs?.filter((i) => !!i) || [],\n    enabled: where && Object.keys(where).length > 0\n  });\n};\n","import React from 'react';\n\n// material-ui\nimport { Button, ButtonProps } from '@mui/material';\n\n// assets\nimport { CloudUpload } from '@mui/icons-material';\n\ninterface FileSelectorProps extends Omit<ButtonProps, 'onChange'> {\n  onChange?: (data: File) => void;\n}\n\nconst FileSelector = ({ onChange, children, ...rest }: FileSelectorProps) => {\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      onChange?.(file);\n    }\n  };\n\n  return (\n    <Button component=\"label\" role={undefined} variant=\"contained\" tabIndex={-1} startIcon={<CloudUpload />} {...rest}>\n      {children}\n      <input type=\"file\" style={{ display: 'none' }} onChange={handleFileChange} />\n    </Button>\n  );\n};\n\nexport default FileSelector;\n","import { useEffect, useState } from 'react';\n\nfunction useWindowDimension() {\n  const [dimension, setDimension] = useState([window.innerWidth, window.innerHeight]);\n\n  useEffect(() => {\n    const resizeHandler = debounce(() => {\n      setDimension([window.innerWidth, window.innerHeight]);\n    }, 200); // ms\n\n    window.addEventListener('resize', resizeHandler);\n    return () => window.removeEventListener('resize', resizeHandler);\n  }, []);\n\n  return dimension;\n}\n\nconst debounce = <T extends (...args: unknown[]) => unknown>(callback: T, waitFor: number) => {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>): ReturnType<T> | undefined => {\n    let result: ReturnType<T> | undefined;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      result = callback(...args) as ReturnType<T>;\n    }, waitFor);\n    return result;\n  };\n};\n\nexport default useWindowDimension;\n","import { useEffect, useRef, useState } from 'react';\n\n// material-ui\nimport { Box } from '@mui/material';\n\n// project imports\nimport useWindowDimension from '@/hooks/useWindowDimension';\nimport { Maybe } from '@/api/gql/graphql';\n\nconst SUPPORTED_FILE_TYPES = ['application/pdf', 'application/json', 'image/*', 'text/*', 'video/*', 'audio/*'];\n\ninterface PreviewProps {\n  url?: Maybe<string>;\n  mimeType?: Maybe<string>;\n}\n\nconst Preview = ({ url, mimeType }: PreviewProps) => {\n  const dimension = useWindowDimension();\n  const iframeRef = useRef<HTMLIFrameElement | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string>();\n\n  useEffect(() => {\n    if (url && mimeType && SUPPORTED_FILE_TYPES.some((type) => mimeType.match(type))) {\n      setPreviewUrl(url);\n    }\n  }, [url, mimeType]);\n\n  if (!url || !mimeType || !previewUrl) {\n    return;\n  }\n\n  const handleIframeLoad = () => {\n    if (iframeRef.current && iframeRef.current.contentWindow) {\n      const iframe = iframeRef.current;\n      const iframeWindow = iframeRef.current.contentWindow;\n\n      const iframeDocument = iframeWindow.document;\n      const iframeHeight = iframe.clientHeight;\n      const iframeWidth = iframe.clientWidth;\n\n      const contentHeight = iframeDocument.documentElement.scrollHeight;\n      const contentWidth = iframeDocument.documentElement.scrollWidth;\n\n      const scaleX = iframeWidth / contentWidth;\n      const scaleY = iframeHeight / contentHeight;\n      const scale = Math.min(scaleX, scaleY);\n\n      iframe.style.transform = `scale(${scale})`;\n      iframe.style.transformOrigin = 'top left';\n      iframe.style.width = `${contentWidth}px`;\n      iframe.style.height = `${contentHeight}px`;\n    }\n  };\n\n  const renderPreview = () => {\n    if (mimeType.startsWith('image/')) {\n      return (\n        <img\n          src={previewUrl}\n          alt=\"Preview\"\n          style={{ width: '100%', height: '100%', maxHeight: '33vh', objectFit: 'cover' }}\n        />\n      );\n    }\n\n    return (\n      <iframe\n        key={`${dimension}`}\n        ref={iframeRef}\n        src={previewUrl}\n        title=\"Preview\"\n        onLoad={handleIframeLoad}\n        style={{ width: '100%', height: '33vh', border: 'none' }}\n      />\n    );\n  };\n\n  return (\n    <Box sx={{ mx: -1, overflow: 'hidden' }}>\n      <Box key={previewUrl} sx={{ width: '100%', height: '33vh', px: 1 }}>\n        {renderPreview()}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Preview;\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\n// material-ui\nimport { Autocomplete, Button, Grid, Stack, TextField } from '@mui/material';\n\n// third party\nimport { Controller, useForm } from 'react-hook-form';\n\n// project imports\nimport { Media } from '@/api/gql/graphql';\nimport FileSelector from '@/ui-component/FileSelecter';\nimport Preview from '@/ui-component/Preview';\nimport SebraForm, { FormProps } from '@/ui-component/SebraForm';\nimport { useDocuments } from '../hooks/useDocumentsQueries';\n\n// assets\nimport { CloudDownload } from '@mui/icons-material';\n\n// ==============================|| DOCUMENT FORM ||============================== //\n\nconst DocumentForm = ({ formProps, ...rest }: FormProps<Media & { upload?: File }>) => {\n  const location = useLocation();\n  const enableExistingDocuments = !location.pathname.startsWith('/documents');\n\n  const { data: documents = [] } = useDocuments();\n\n  const {\n    control,\n    handleSubmit,\n    watch,\n    setValue,\n    formState: { errors }\n  } = useForm<Media & { upload?: File }>(formProps);\n\n  const fields = watch();\n\n  const handleFileChange = (data: File) => {\n    setValue('upload', data);\n    setValue('alt', data.name);\n  };\n\n  useEffect(() => {\n    if (fields.id) {\n      const document = documents.find((doc) => doc.id === fields.id);\n      if (document) {\n        setValue('upload', undefined);\n        setValue('alt', document.alt);\n      }\n    } else {\n      setValue('upload', undefined);\n      setValue('alt', '');\n    }\n  }, [fields.id, setValue, documents]);\n\n  return (\n    <SebraForm {...rest} handleSubmit={handleSubmit}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <Controller\n            control={control}\n            name=\"alt\"\n            rules={{ required: true }}\n            defaultValue=\"\"\n            render={({ field, fieldState }) => (\n              <TextField\n                fullWidth\n                label=\"Dokumentnamn\"\n                type=\"text\"\n                margin=\"none\"\n                {...field}\n                error={!!fieldState.error}\n              />\n            )}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Controller\n            control={control}\n            name=\"upload\"\n            render={({ field }) => (\n              <TextField\n                fullWidth\n                label=\"Dokument\"\n                type=\"text\"\n                margin=\"none\"\n                value={field.value?.name || ''}\n                disabled\n                error={!!errors.upload}\n                InputProps={{ endAdornment: fields.upload?.type }}\n              />\n            )}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <Preview url={fields.thumbnailURL || fields.url} mimeType={fields.mimeType} />\n        </Grid>\n        <Grid item xs={12}>\n          <Stack spacing={2} direction=\"row\">\n            <FileSelector onChange={handleFileChange}>{fields.id ? 'Ersätt dokument' : 'Välj dokument'}</FileSelector>\n            <Button\n              startIcon={<CloudDownload />}\n              variant=\"contained\"\n              href={fields.url || '#'}\n              download={fields.alt}\n              disabled={!fields.url}\n            >\n              Ladda ner\n            </Button>\n          </Stack>\n        </Grid>\n        <Grid item xs={12}>\n          {enableExistingDocuments && (\n            <Controller\n              name=\"id\"\n              control={control}\n              render={({ field }) => (\n                <Autocomplete\n                  options={documents}\n                  getOptionKey={(option) => option.id}\n                  getOptionLabel={(option) => option.alt || ''}\n                  value={documents.find((document) => document.id === field.value) || null}\n                  onChange={(_, value) => field.onChange(value ? value.id : undefined)}\n                  renderInput={(params) => (\n                    <TextField {...params} label=\"Välj existerande dokument\" variant=\"outlined\" fullWidth />\n                  )}\n                />\n              )}\n            />\n          )}\n        </Grid>\n      </Grid>\n    </SebraForm>\n  );\n};\n\nexport default DocumentForm;\n"],"names":["CloudDownload","createSvgIcon","_jsx","CloudUpload","getDocumentsGQL","where","requestGQL","graphql","getDocumentGQL","data","deleteDocumentGQL","getDocumentReferencesGQL","createDocumentReferenceGQL","pick","updateDocumentReferenceGQL","deleteDocumentReferenceGQL","getDocumentReferencesLocal","refs","selectAllQuery","convertToSQLWhereClause","allMedia","getAllFilesFromIndexedDB","doc","ref","createDocumentReferenceLocal","validateRequiredFields","params","uuidv4","insertQuery","updateDocumentReferenceLocal","id","deleteDocumentReferenceLocal","deleteQuery","createDocumentRest","upload","alt","token","loadToken","formData","response","API_URL","updateDocumentRest","body","headers","useSaveDocument","isDemo","useAppStore","queryClient","useQueryClient","showSnackbar","useSnackbar","useMutation","saveFileToIndexedDB","useUpdateDocument","useDeleteDocument","deleteFileFromIndexedDB","useCreateDocumentReference","useUpdateDocumentReference","useDeleteDocumentReference","useDocuments","fn","useQuery","_b","_a","i","useDocument","getFileFromIndexedDB","useDocumentReferences","FileSelector","onChange","children","rest","handleFileChange","event","file","jsxs","Button","jsx","useWindowDimension","dimension","setDimension","useState","useEffect","resizeHandler","debounce","callback","waitFor","timeout","args","result","SUPPORTED_FILE_TYPES","Preview","url","mimeType","iframeRef","useRef","previewUrl","setPreviewUrl","type","handleIframeLoad","iframe","iframeDocument","iframeHeight","iframeWidth","contentHeight","contentWidth","scaleX","scaleY","scale","renderPreview","Box","DocumentForm","formProps","enableExistingDocuments","useLocation","documents","control","handleSubmit","watch","setValue","errors","useForm","fields","document","SebraForm","Grid","Controller","field","fieldState","TextField","Stack","Autocomplete","option","_","value"],"mappings":"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","x_google_ignoreList":[0,1]}